# Epic 7.2: Threat Analysis Engine

## Description
Develop the core intelligence that processes and correlates data to generate predictive alerts. This epic focuses on implementing the rule-based logic, data correlation mechanisms, and alert generation within the backend services.

## Functional Requirements (from PRD)
- **FR 5.2.1:** The system shall correlate simulated data from satellite, CCTV, and IoT sensors based on time and geospatial proximity.
- **FR 5.2.2:** The system shall apply predefined, configurable rule packs (e.g., YAML/JSON) to correlated data to identify potential threats.
- **FR 5.2.3:** The system shall generate `system_alerts` with severity levels (1-5), descriptions, and contributing signals when rules are met.
- **FR 5.2.4:** The system shall support versioning of rule packs and display rule traces for explainability.

## Technical Specifications (from Technical Specification)
- **Backend Service:** Threat Analysis Engine Service
    - **Consumers:** Subscribes to Kafka/BullMQ for raw data.
    - **Logic:** Data Correlation, Rule Evaluation (using YAML/JSON rule packs), Alert Generation, Publishing to Redis/WebSocket.
- **Data Models:** `system_alerts` (generated by this service).
- **Performance:** Process and generate alerts within 5 seconds of receiving critical simulated data.

## User Stories (To be defined)
- As a backend developer, I want to implement data correlation logic so that the system can combine information from different simulated sources.
- As a backend developer, I want to define and load configurable rule packs so that the Threat Analysis Engine can identify various hazard conditions.
- As a backend developer, I want the system to generate `system_alerts` with appropriate severity and details when rules are triggered.
- As a backend developer, I want to ensure rule packs are versioned and rule traces are available so that alerts are explainable and auditable.
